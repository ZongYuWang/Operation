## 面向对象-类

##### 函数式编程和面向对象编程对比：

```ruby

函数式编程：
def search(self,back_domain):
    pass

def add(self,back_domain,record):
    pass
    
def delete(self,back_domain):
    pass
    
search("www.test.com")
add("www.test.com",xxxxx)

面向对象编程：
# 定义类（类就是封装了几个函数，在类中称为方法）
class haproxy:  # 定义类名

    def search(self,back_domain): # 定义方法
        pass

    def add(self,back_domain,record):
        pass
    
    def delete(self,back_domain):
        pass
    
obj = haproxy()  # 根据类创建对象（创建一个haproxy类的实例）
obj.search("www.test.com")   # 使用对象去执行类中方法
obj.add("www.test.com",xxxxxx)

【说明】通过上面的代码比对，反而面向对象的代码要复杂，所以面向对象不是所有情况都适用

```
![](https://github.com/ZongYuWang/image/blob/master/python-class1.png)

self详解：
```ruby

class haproxy:

    def search(self,back_domain):  # 定义类的成员(方法是类的成员)
        print(back_domain,self) # back_domain:'www.test.com'    self:<__main__.haproxy object at 0x021A48D0>

    def add(self,back_domain,record):
        pass

    def delete(self,back_domain):
        pass

obj_1 = haproxy()  # obj_1是类对象，obj_1：<__main__.haproxy object at 0x021A48D0>
print(obj_1)
obj_1.search("www.test.com")      # self:obj_1  back_domain:www.test.com
obj_2.search("www.wangzy.com")    # self:obj_2  back_domain:www.wangzy.com
```
`self其实就是所有类对象的一个变量，self参数不需要传递，只是形式参数，python会在内部自己传递 `   

*`输出:`*
```ruby
<__main__.haproxy object at 0x021A48D0>  # 输出的obj的地址
www.test.com <__main__.haproxy object at 0x021A48D0>  输出的back_domain值，和self地址值

【说明】其实就是把obj传递给了self
```

- ##### 封装：
```ruby
class haproxy:

    def search(self,back_domain):  # 需要传递一次back_domain
        pass

    def add(self,back_domain,record):  # 需要传递第二次back_domain
        pass

    def delete(self,back_domain):  # 需要传递第三次back_domain
        pass
      
search("www.test.com")  # 调用也需要输入三次
add("www.test.com")
delete("www.baidu.com")
```
所以这样也很麻烦，所以引入封装的概念：
- 封装方式一：
![](https://github.com/ZongYuWang/image/blob/master/python-class2.png)
```ruby
class haproxy:

    def search(self):
        print(self.back_domain)

    def add(self,record):
        pass

    def delete(self):
        pass

obj_1 = haproxy()
obj_1.back_domain = "www.test.com" # 在对象中封装数据
obj_1.search()

obj_2 = haproxy()
obj_2.back_domain = "www.wanzy.com"
obj_2.search()
```
*`输出`*
```ruby
www.test.com
www.wanzy.com
```
更为直观的解释：数据库操作  
```ruby
class mysqltest:

    def add(self,ip,port,username,password)  # 数据库的添加和删除都需要输入4个相同的信息
        pass
    
    def remove(self,ip,port,username,password)
        pass

obj1 = mysqltest()   # 使用这种方式将优化
obj1.host = "192.168.1.1"
obj1.port = "3306"
obj1.username = "root"
obj1.password = "test"

obj1.add()
obj1.remove()
```
